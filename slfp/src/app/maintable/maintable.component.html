<script src="maintable.component.spec.ts"></script>
<div class="table-responsive">
  <table class="table table-sm">
    <thead>
    <tr>
      <th scope="col" style="min-width: 410px">Jahr</th>
      <th scope="row"></th>
      <th class="text-center" style="min-width: 80px" *ngFor="let year of getYears()" scope="col">{{year}}</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td scope="row">Ertrag</td>
      <td scope="row"></td>
      <td *ngFor="let inoutcome of getInoutcomes()">
        <input class="table-input text-right" [(ngModel)]="inoutcome.income" placeholder="Ertrag">
      </td>
    </tr>
    <tr>
      <td scope="row">Aufwand</td>
      <td scope="row"></td>
      <td *ngFor="let inoutcome of getInoutcomes()">
        <input class="table-input text-right" [(ngModel)]="inoutcome.outcome" placeholder="Aufwand">
      </td>
    </tr>

    <tr class="table-warning">
      <th scope="row">Ãœberschuss/Fehlbetr. aus laufend. Rechnung</th>
      <td scope="row"></td>
      <td class="text-right" *ngFor="let inoutcome of getInoutcomes()">{{calc(inoutcome)}}</td>
    </tr>

    <tr>
      <th scope="row">&#xa0;</th>
    </tr>

    <tr class="table-secondary">
      <th scope="row">Steuerhaushalt            <button (click)="newInvestment()" type="button" class="close" data-toggle="modal" data-target="#investmentModal" aria-label="Close">
        <span aria-hidden="true">+</span>
      </button>
      </th>
    </tr>

    <ng-container *ngFor="let investmentCategory of getInvestmentCategories()">
      <tr>
        <th scope="row" data-toggle="collapse" attr.data-target=".rate-{{investmentCategory.rate.toString().replace('.', '')}}"><span *ngIf="false">+</span> {{investmentCategory.name}} ({{investmentCategory.rate}}%)</th>
      </tr>
      <tr class="collapse rate-{{investmentCategory.rate.toString().replace('.', '')}}" *ngFor="let investment of getInvestmentsByRate(investmentCategory.rate)">
        <td scope="col">{{investment.name}}<button (click)="editInvestment(investment)" type="button" class="close" data-toggle="modal" data-target="#investmentModal" aria-label="Close">
          <span aria-hidden="true">&#x270E;</span>
        </button>
        </td>
        <td scope="row">Abschreibungen</td>
        <td scope="row" class="text-right" *ngFor="let taxoff of getTaxoffsByYear(investment)">{{taxoff}}
        </td>
      </tr>
    </ng-container>
    </tbody>
  </table>

  <app-investment [investment]="selectedInvestment"></app-investment>

</div>
